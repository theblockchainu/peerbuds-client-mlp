<div class="login-section col-md-10 col-md-offset-1" style="margin-top: 1%" id="content">
  <nav md-tab-nav-bar>
    <a md-tab-link [routerLink]="'/dashboard'" [active]="false">
      Dashboard
    </a>
    <a md-tab-link [routerLink]="'/inbox'" [active]="false">
      Inbox
    </a>
    <a md-tab-link [routerLink]="'/workshop-console'" [active]="true">
      Teaching
    </a>
    <a md-tab-link [routerLink]="'/learning-console'" [active]="false">
      Learning
    </a>
    <a md-tab-link [routerLink]="'/profile-console'" [active]="false">
      Profile
    </a>
    <a md-tab-link [routerLink]="'/account'" [active]="false">
      Account
    </a>
  </nav>
  <div class="row">
    <div class="col-md-12">
      <div *ngIf="!loaded" class="center">
        <i class="fa fa-spinner fa-spin" style="font-size:24px"></i>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <router-outlet>
        <div class="row" style="margin-top: 30px">
          <div class="col-md-3">
            <md-list>
              <md-list-item>
                View All
              </md-list-item>
              <md-list-item>
                <b>
                  Workshops
                </b>
              </md-list-item>
              <md-list-item>
                Experiences
              </md-list-item>
              <md-list-item>
                Sessions
              </md-list-item>
              <md-list-item>
                <button md-raised-button (click)="createWorkshop()" color="primary">New Workshop</button>
              </md-list-item>
            </md-list>
          </div>
          <div class="col-md-9" *ngIf="loaded">
            <div style="display:inline;" *ngIf="workshops.activeCount > 0">
              <h2>Ongoing & Upcoming</h2>
            </div>
            <div class="row">
              <div>
                <div style="margin-top:30px;" class="col-md-12">
                  <div class="row">
                    <div *ngFor="let workshop of workshops.data" [ngSwitch]="workshop.status">
                      <ng-template #topicName>{{workshop.topics[0].name}}</ng-template>
                      <ng-template #noTopicText>No Topics</ng-template>
                      <ng-template #ongoingCard>
                        <md-card style="text-align: center; padding: 20px;" >
                          <md-card-content>
                            <div style="text-align: right">
                              <div class="pull-right">
                                <a [mdMenuTriggerFor]="collectionCardMenu" style="text-align: right; padding: 0px">
                                  <md-icon>more_vert</md-icon>
                                </a>
                              </div>
                            </div>
                            <div class="collectionParticipantImageCarousel">
                              <div class="circle-thumb" *ngFor="let participant of workshop.participants">
                                <img src="{{ participant.profiles[0].picture_url }}" alt=" " class="thumb-50">
                              </div>
                            </div>
                            <div class="participantCount">
                              <span>{{workshop.participants.length}} Participants </span>
                            </div>
                            <div class="collectionTitle">{{ workshop.title || 'No Title' }} </div>
                            <md-progress-bar mode="determinate" value="{{getProgressValue(workshop)}}"></md-progress-bar>
                            <div class="collectionSubtitle" >
                              {{ calculateNumberOfDays(workshop.calendars[0]) }} Days | {{workshop.contents.length}} Parts | <span *ngIf="workshop.topics.length > 0; then topicName else noTopicText"></span>
                            </div>
                            <p class="upcomingEventLabel">
                              Up Next
                            </p>
                            <div class="upcomingEventTitle">
                              {{ getUpcomingEvent(workshop).title }}
                            </div>
                            <div class="upcomingEventTime">
                              {{ getUpcomingEvent(workshop).type + ' ' + getUpcomingEvent(workshop).fillerWord  + ' in ' +  getUpcomingEvent(workshop).timeToStart + ' Days' }}
                            </div>
                          </md-card-content>
                          <md-card-actions *ngIf="getUpcomingEvent(workshop).hasStarted">
                            <button md-raised-button (click)="onSelect(workshop)">{{getUpcomingEvent(workshop).upcomingEventButtonText}}</button>
                          </md-card-actions>
                          <br><br>
                          <md-card-footer class="cardFooter">
                            <button md-button (click)="viewWorkshop(workshop)">Continue Teaching</button>
                          </md-card-footer>
                        </md-card>
                      </ng-template>
                      <ng-template #upcomingCard>
                        <md-card style="text-align: center; padding: 20px;" >
                          <md-card-content>
                            <div style="text-align: right">
                              <div class="pull-right">
                                <a [mdMenuTriggerFor]="collectionCardMenu" style="text-align: right; padding: 0px">
                                  <md-icon>more_vert</md-icon>
                                </a>
                              </div>
                            </div>
                            <div class="collectionParticipantImageCarousel">
                              <div class="circle-thumb" *ngFor="let participant of workshop.participants">
                                <img src="{{ participant.profiles[0].picture_url }}" alt=" " class="thumb-50">
                              </div>
                            </div>
                            <div class="participantCount">
                              <span>{{workshop.participants.length}} Participants </span>
                            </div>
                            <div class="lightText">
                              <span>{{workshop.maxSpots - workshop.participants.length}} seats available </span>
                            </div>
                            <div class="collectionTitle">{{ workshop.title || 'No Title' }} </div>
                            <div class="lighterText">
                              Approved {{getDaysBetween(workshop.updatedAt, now)}}
                            </div>
                            <div class="collectionSubtitle" >
                              {{ calculateNumberOfDays(workshop.calendars[0]) }} Days | {{workshop.contents.length}} Parts | <span *ngIf="workshop.topics.length > 0; then topicName else noTopicText"></span>
                            </div>
                            <p class="upcomingEventLabel">
                              First Session
                            </p>
                            <div class="upcomingEventTitle">
                              {{ getUpcomingEvent(workshop).title }}
                            </div>
                            <div class="upcomingEventTime">
                              {{ getUpcomingEvent(workshop).type + ' ' + getUpcomingEvent(workshop).fillerWord  + ' in ' +  getUpcomingEvent(workshop).timeToStart + ' Days' }}
                            </div>
                          </md-card-content>
                          <md-card-actions *ngIf="getUpcomingEvent(workshop).hasStarted">
                            <button md-raised-button (click)="onSelect(workshop)">{{getUpcomingEvent(workshop).upcomingEventButtonText}}</button>
                          </md-card-actions>
                          <br><br>
                          <md-card-footer class="cardFooter">
                            <button md-button (click)="viewWorkshop(workshop)">Is this a recurring workshop?</button>
                          </md-card-footer>
                        </md-card>
                      </ng-template>
                      <div class="col-md-4" style="margin-top: 20px;" *ngSwitchCase="'active'">
                        <div *ngIf="getCurrentCalendar(workshop.calendars).startDate > now; then ongoingCard else upcomingCard">
                          <!--show card template here-->
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br><br>
            <div style="display:inline;" *ngIf="workshops.draftCount > 0">
              <h2>Drafts</h2>
            </div>
            <div class="row">
              <div>
                <div style="margin-top:30px;" class="col-md-12">
                  <div class="row">
                    <div *ngFor="let workshop of workshops.data" [ngSwitch]="workshop.status">
                      <div class="col-md-4" style="margin-top: 20px;" *ngSwitchCase="'draft' || 'submitted'" >
                        <md-card style="text-align: center; padding: 20px;">
                          <md-card-content>
                            <div class="clearfix" style="text-align: right">
                              <div class="pull-right">
                                <a md-button [mdMenuTriggerFor]="collectionCardMenu" style="text-align: right; padding: 0px">
                                  <md-icon>more_vert</md-icon>
                                </a>
                              </div>
                            </div>
                            <div style="margin-top: 30px; margin-bottom: 30px">{{ workshop.title || 'No Title' }} </div>
                            <ng-template #draftMessage>
                              <p class="lightText" style="margin-top:20px">
                                You still have to complete filling up your workshop details
                              </p>
                            </ng-template>
                            <ng-template #submittedMessage>
                              <p class="lightText" style="margin-top:20px">
                                Submitted for review
                              </p>
                            </ng-template>
                            <md-progress-bar mode="determinate" value="{{ getProgressValue(workshop) }}"></md-progress-bar>
                            <p class="lightText" *ngIf="workshop.status == 'draft'; then draftMessage else submittedMessage"></p>
                          </md-card-content>
                          <md-card-actions>
                            <button md-raised-button (click)="onSelect(workshop)">{{ getDraftButtonText(workshop.status) }}</button>
                          </md-card-actions>
                          <md-card-footer>

                          </md-card-footer>
                        </md-card>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br><br>
            <div style="display:inline;" *ngIf="workshops.pastCount > 0">
              <h2>Past</h2>
            </div>
            <div class="row">
              <div>
                <div style="margin-top:30px;" class="col-md-12">
                  <div class="row">
                    <div *ngFor="let workshop of workshops.data" [ngSwitch]="workshop.status">
                      <div class="col-md-4" style="margin-top: 20px;" *ngSwitchCase="'complete'" >
                        <md-card style="text-align: center; padding: 20px;">
                          <md-card-content>
                            <div class="clearfix" style="text-align: right">
                              <div class="pull-right">
                                <a md-button [mdMenuTriggerFor]="collectionCardMenu" style="text-align: right; padding: 0px">
                                  <md-icon>more_vert</md-icon>
                                </a>
                              </div>
                            </div>
                            <div style="margin-top: 30px; margin-bottom: 30px">{{ workshop.title || 'No Title' }} </div>
                            <md-progress-bar mode="determinate" value="{{getProgressValue(workshop)}}"></md-progress-bar>
                            <p style="margin-top:20px">
                              You still have to complete filling up your workshop details
                            </p>
                          </md-card-content>
                          <md-card-actions>
                            <button md-raised-button (click)="onSelect(workshop)">Continue Editing</button>
                          </md-card-actions>
                          <md-card-footer>

                          </md-card-footer>
                        </md-card>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </router-outlet>
    </div>
  </div>

  <md-menu #collectionCardMenu>
    <button md-menu-item>
      Delete
    </button>
    <button md-menu-item>
      Message Students
    </button>
  </md-menu>

</div>
