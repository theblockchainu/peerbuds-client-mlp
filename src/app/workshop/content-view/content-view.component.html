<div [formGroup]="itenaryForm">
  <div class="row">
    <div class="col-md-12">
      <div style="text-align: center; margin-top: 0px; margin-bottom: 30px;">
        <hr>
        <div style="margin-top: -30px; width: fit-content; background-color: #fff; margin-left: auto; margin-right: auto; padding: 0px 20px;">
          <mat-icon>wb_sunny</mat-icon>
          <input matInput [matDatepicker]="startDatePicker" formControlName="date" [hidden]="true">
          <a *ngIf="!itenaryForm.value.date" style="cursor: pointer; float: right; margin: 3px 0 0 10px;font-size:16px;border-bottom:1px dotted gray;" (click)="startDatePicker.open()">({{showItineraryDate(itenaryForm.value.date)}})</a>
          <a *ngIf="itenaryForm.value.date" style="float: right; margin: 3px 0 0 10px;font-size:16px;border-bottom:1px dotted gray;" >({{showItineraryDate(itenaryForm.value.date)}})</a>
          <mat-datepicker touchUi="true" #startDatePicker [startAt]="collectionStartDate"></mat-datepicker>
          <a style="cursor: pointer; float: right; margin: 3px 0 0 10px;font-size:16px;">
            Day {{itenaryId + 1}}
          </a>
        </div>
        <div style="margin-top: -28px; width: fit-content; background-color: #fff; float: right; padding: 0px 10px;">
          <mat-icon style="font-size: 16px; cursor: pointer" (click)="deleteDay(itenaryId)">close</mat-icon>
        </div>
      </div>
    </div>
  </div>
  <div class="row" *ngIf="!itenaryForm.value.date">
    <div class="col-md-12">
      <div style="text-align: center; color: #777777; font-size: 90%;">
        <mat-icon style="position: relative; top: 5px;">
          keyboard_arrow_up
        </mat-icon>
        <span style="font-size:14px">Please select a date for this day to continue adding activities...</span>
      </div>
    </div>
  </div>
  <div *ngIf="itenaryForm.value.date">
    <div class="col-md-10" style="padding-left: 0px;">
      <div formArrayName="contents">
        <div class="selected-content-label title" *ngIf="itenaryForm.controls.contents.controls.length > 0">
          Activity selected
        </div>
        <mat-list style="margin-left: -20px">
          <mat-list-item *ngFor="let Content of itenaryForm.controls.contents.controls; let i=index" style="margin: 20px 0px; padding: 0px 0px; height: fit-content;">
            <div class="col-md-3" style="padding-left: 0px;" (click)="findAndOpenDialog(i)">
              <img *ngIf="!Content.value.imageUrl" src="/assets/images/placeholder-image.jpg" style="width: 140px;">
              <img *ngIf="Content.value.imageUrl  && Content.value.type !== 'video'" src="{{config.apiUrl + Content.value.imageUrl}}" (error)="imgErrorHandler($event)" style="width: 140px;">
              <video *ngIf="Content.value.imageUrl && Content.value.type === 'video'" width="100%" class="center-block itenary-media" preload="metadata" poster="../../../assets/images/placeholder-image.jpg" controls>
                <source src="{{config.apiUrl + Content.value.imageUrl}}" type="video/mp4">
              </video>
              <!-- <video *ngIf="Content.value.imageUrl && Content.value.type === 'video'" id="video" src="{{config.apiUrl + Content.value.imageUrl}}" type="video/mp4" controls></video> -->
            </div>
            <div class="col-md-7" (click)="findAndOpenDialog(i)">
              <div class="content-title">{{Content.value.title}}</div>
              <div *ngIf="Content.value.type === 'online'" class="content-subtitle">{{getContentTimeRange(Content)}}</div>
              <div *ngIf="Content.value.type === 'project'" class="content-subtitle">Deadline: {{getDeadline(Content)}}</div>
              <br>
              <div class="content-type subtitle">{{_collectionService.getContentTypeFullName(Content.value.type) | titlecase }}</div>
            </div>
            <div class="col-md-2">
              <mat-icon class="pull-right" *ngIf="itenaryForm.controls.contents.controls.length > 0" (click)="removeContent(i)" style="font-size: 16px; color: #777777;">close</mat-icon>
              <mat-icon class="pull-right" *ngIf="itenaryForm.controls.contents.controls.length > 0" (click)="findAndOpenDialog(i)" style="font-size: 16px; color: #777777;">mode_edit</mat-icon>
            </div>
            <!--<div class="col-md-2 pull-right">
              <span class="label label-warning" [hidden]="!Content.value.pending">Pending</span>
              <span class="label label-success" [hidden]="Content.value.pending">Success</span>
            </div>-->
          </mat-list-item>
        </mat-list>
      </div>
    </div>
    <div class="row" style="margin-bottom: 80px; margin-top: 10px;font-size:16px;">
      <div class="col-md-12">
        <span class="activity-title">
          Add new activity
        </span>
        &emsp;
        <span class="activity-subtitle">
          (Must have at least one online session)
        </span>
        <br><br>
        <button mat-button type="button" (click)="addContent('online'); findAndOpenDialog(-1);" style="padding-left: 0px">
          <mat-icon color="primary" style="font-size: 20px">add_circle</mat-icon>
          Online Session
        </button>&emsp;

        <button mat-button type="button" (click)="addContent('video'); findAndOpenDialog(-1);">
          <mat-icon color="primary" style="font-size: 20px">add_circle</mat-icon>
          Video
        </button>&emsp;

        <button mat-button type="button" (click)="addContent('project'); findAndOpenDialog(-1);">
          <mat-icon color="primary" style="font-size: 20px">add_circle</mat-icon>
          Project
        </button>&emsp;
      </div>
    </div>
  </div>
</div>