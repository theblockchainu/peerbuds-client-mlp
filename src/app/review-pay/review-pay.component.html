<!--component html goes here -->
<div class="main-content" *ngIf="collection">
    <div class="container-fluid" style="margin: 3% 0px">
        <div class="row">
            <div class="col-md-offset-1 col-sm-6">
                <div class="title">Review and pay</div>
                <div class="seperate-section margin-bottom-20">
                    <div class="fw-bold margin-bottom-10">Guest requirements</div>
                    <span class="text-grey">Must be above 18 and can't wear shoes</span>
                </div>
                <h3>Payment method</h3>
                <form [formGroup]="makePaymentForm" (ngSubmit)="getToken()" novalidate>
                    <div class="payment-message fs-13 text-center margin-top-20">{{message}}</div>
                    <div class="row margin-bottom-30">
                        <div class="col-sm-6">
                            <label>Billing Country</label>
                            <mat-form-field>
                                <mat-select formControlName="country" placeholder="Select Country">
                                    <mat-option value="{{country.name}}" *ngFor="let country of countries">{{ country.name }}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row margin-bottom-50">
                        <div class="col-sm-6">
                            <label>Payment type</label>
                            <mat-form-field>
                                <mat-select placeholder="Select card" (change)="getcardDetails($event)" *ngIf="isCardExist">
                                    <mat-option value="{{card.id}}" *ngFor="let card of listAllCards">{{ card.brand }} {{card.object}} xxxx xxxx xxxx {{card.last4}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                            <mat-form-field>
                                <mat-select placeholder="Add new card" (change)="getCardType($event)" *ngIf="!isCardExist">
                                    <mat-option value="Visa">Visa Card</mat-option>
                                    <mat-option value="Master">Master Card</mat-option>
                                    <mat-option value="Amex">American Express</mat-option>
                                    <mat-option value="Discover">Discover Card</mat-option>
                                    <mat-option value="Paypal">Paypal</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div class="col-sm-6">
                            <div class="margin-top-35" *ngIf="!isCardExist">
                                <span class="text-grey"><i class="fa fa-cc-visa fa-2x"></i></span>
                                <span class="text-grey"><i class="fa fa-cc-mastercard fa-2x"></i></span>
                                <span class="text-grey"><i class="fa fa-cc-amex fa-2x"></i></span>
                                <span class="text-grey"><i class="fa fa-cc-discover fa-2x"></i></span>
                                <span class="text-grey"><i class="fa fa-cc-paypal fa-2x"></i></span>
                            </div>
                            <div class="margin-top-35" *ngIf="cardDetails.id">
                                <span class="text-grey" *ngIf="cardDetails.brand === 'Visa'"><i class="fa fa-cc-visa fa-2x"></i></span>
                                <div class="display-inline-block fs-12 text-grey">
                                    <span class="display-block lh-1">Name: <span class="text-black">{{cardDetails.name}}</span></span>
                                    <span>Expires: <span class="text-black">{{cardDetails.exp_month}}/{{cardDetails.exp_year}}</span></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-details" *ngIf="!isCardExist">
                        <div class="row margin-bottom-10">
                            <div class="col-sm-9">
                                <label class="small">Card number *</label>
                                <mat-form-field class="example-full-width">
                                    <input matInput type="text" formControlName="cardNumber" />
                                    <mat-icon mdSuffix><i class="fa fa-lock text-grey"></i></mat-icon>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="row margin-bottom-30">
                            <div class="col-sm-3">
                                <label class="small">Expires on *</label>
                                <mat-form-field>
                                    <mat-select placeholder="MM" formControlName="expiryMonth">
                                        <mat-option value="01">January</mat-option>
                                        <mat-option value="02">February</mat-option>
                                        <mat-option value="03">March</mat-option>
                                        <mat-option value="04">April</mat-option>
                                        <mat-option value="05">May</mat-option>
                                        <mat-option value="06">June</mat-option>
                                        <mat-option value="07">July</mat-option>
                                        <mat-option value="08">August</mat-option>
                                        <mat-option value="09">Sepetmber</mat-option>
                                        <mat-option value="10">October</mat-option>
                                        <mat-option value="11">November</mat-option>
                                        <mat-option value="12">December</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-3">
                                <label class="small">&nbsp;</label>
                                <mat-form-field>
                                    <mat-select placeholder="YYYY" formControlName="expiryYear">
                                        <mat-option value="{{ expiryyear }}" *ngFor="let expiryyear of expiryYear">{{ expiryyear }}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-3">
                                <label class="small">Security code *</label>
                                <!--<mat-form-field class="example-full-width">
                                    <input matInput type="text" formControlName="cvc" />
                                    <mat-icon mdSuffix><i class="fa fa-question-circle-o text-grey"></i></mat-icon>
                                </mat-form-field>-->
                                <mat-form-field>
                                    <input matInput formControlName="cvc" type="text" placeholder="221">
                                    <mat-icon mdSuffix><i class="fa fa-question-circle-o text-grey"></i></mat-icon>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="row margin-bottom-20">
                            <div class="col-sm-6">
                                <label class="small">First Name</label>
                                <mat-form-field>
                                    <input matInput type="text" placeholder="Faria" formControlName="firstName" />
                                </mat-form-field>
                            </div>
                            <div class="col-sm-6">
                                <label class="small">Last Name</label>
                                <mat-form-field>
                                    <input matInput type="text" placeholder="Anzum" formControlName="lastName" />
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="row margin-bottom-20">
                            <div class="col-sm-6">
                                <label class="small">Street Address *</label>
                                <mat-form-field>
                                    <input matInput type="text" formControlName="address_street" placeholder="street address" />
                                </mat-form-field>
                            </div>
                            <div class="col-sm-3">
                                <label class="small">Apt #</label>
                                <mat-form-field>
                                    <input matInput type="text" formControlName="address_apt" placeholder="apt" />
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="row margin-bottom-20">
                            <div class="col-sm-5">
                                <label class="small">City *</label>
                                <mat-form-field class="example-full-width">
                                    <input matInput type="text" formControlName="address_city" />
                                </mat-form-field>
                            </div>
                            <div class="col-sm-3">
                                <label class="small">State</label>
                                <mat-form-field class="example-full-width">
                                    <input matInput type="text" formControlName="address_state" />
                                </mat-form-field>
                            </div>
                            <div class="col-sm-4">
                                <label class="small">Postal code *</label>
                                <mat-form-field class="example-full-width">
                                    <input matInput type="text" formControlName="address_postal_code" maxLength="5" minlength="5" />
                                </mat-form-field>
                            </div>
                        </div>
                    </div>
                    <div class="terms-text">
                        <div class="terms-title">Terms of Service</div>
                        <p class="text-grey fs-15">By confirming this booking you are agree to the Peerbuds additional terms of service, Guest Release
                            and Waiver, and the Cancellation Policy.</p>
                    </div>
                    <button mat-raised-button color="primary" type="submit" class="text-center" *ngIf="!listAllCards?.length > 0" [disabled]="!makePaymentForm.valid">{{collection.price}} usd - Confirm Payment</button>
                    <button mat-raised-button color="primary" type="submit" class="text-center" *ngIf="listAllCards?.length > 0" [disabled]="!cardDetails.id">{{collection.price}} usd - Confirm Booking</button>
                    <div class="text-center display-inline-block margin-left-10" *ngIf="savingData"><img src="{{loader}}" alt="loading" style="width:16px;" /> Processing Payment</div>
                    <div class="text-center text-grey small margin-top-10" *ngIf="!listAllCards?.length > 0">
                        <i class="fa fa-lock"></i> Your Credit card information is encrypted
                    </div>
                </form>
            </div>
            <div class="col-sm-3 col-sm-offset-1">
                <div class="sidebar-right">
                    <div class="sidebar-box">
                        <div class="seperate-section padding-top-0">
                            <div class="display-table">
                                <div class="margin-bottom-10">
                                    <img [src]="(collection.imageUrls && collection.imageUrls.length > 0) ? config.apiUrl+collection.imageUrls[0] : defaultImageUrl"
                                        alt="image" />
                                </div>
                                <div class="fs-17">{{ collection.title }} <br>
                                    <span class="display-inline-block fs-15 text-grey">{{collection.totalHours}} hour {{ collection.type }}</span>
                                    <span class="display-inline-block pull-right fs-14 text-grey" *ngIf="collection.owners && collection.owners.length > 0">Hosted by {{collection.owners[0].username}}</span>
                                </div>
                            </div>
                        </div>
                        <div class="seperate-section">
                            <div class="">{{ collection.createdAt | date: 'EEE, MMM dd' }}</div>
                            <div class="">1 snack, drink and equipment</div>
                            <a href="#">See details</a>
                        </div>
                        <div class="seperate-section">
                            <div class="margin-bottom-10">
                                <span class="text-grey">{{collection.price}} usd x {{ guestCount }} guest</span>
                                <span class="pull-right">{{ collection.price * guestCount }} usd</span>
                            </div>
                            <a href="#" class="display-inline-block margin-bottom-10">Add coupan</a>
                            <div class="margin-bottom-10">
                                <span class="fw-bold">Total</span>
                                <span class="pull-right fw-bold">{{ collection.price * guestCount }} usd</span>
                            </div>
                        </div>
                        <div class="seperate-section">
                            <div class="fs-18 margin-bottom-10">Cancellation Policy</div>
                            <div class="fs-14 text-grey">Get a <span class="text-black">full refund</span> if you cancel within 24 hours of purchase.</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--<div class="container-fluid">
        <div class="row">
            <div class="col-sm-4 col-sm-offset-4">
                <div class="title">Review and pay</div>
                <div class="seperate-section">
                    <div>{{ collection.title }}</div>
                </div>
                <form [formGroup]="makePaymentForm" (ngSubmit)="getToken()" novalidate>
                    <div class="payment-message fs-13 text-center margin-top-20">{{message}}</div>
                    <label class="small margin-top-20 margin-bottom-0">Card Number</label>
                    <div class="position-relative">
                        <mat-input-container class="pb-block">
                            <input matInput formControlName="cardNumber" type="text" placeholder="0987 4859 6258 4857">
                        </mat-input-container>
                        <i class="fa fa-cc-visa fa-2x"></i>
                    </div>

                    <div class="row margin-bottom-30">
                        <div class="col-sm-6">
                            <label class="small display-block">Expires on *</label>
                            <mat-select placeholder="MM" formControlName="expiryMonth">
                                <mat-option value="01">January</mat-option>
                                <mat-option value="02">February</mat-option>
                                <mat-option value="03">March</mat-option>
                                <mat-option value="04">April</mat-option>
                                <mat-option value="05">May</mat-option>
                                <mat-option value="06">June</mat-option>
                                <mat-option value="07">July</mat-option>
                                <mat-option value="08">August</mat-option>
                                <mat-option value="09">Sepetmber</mat-option>
                                <mat-option value="10">October</mat-option>
                                <mat-option value="11">November</mat-option>
                                <mat-option value="12">December</mat-option>
                            </mat-select>
                        </div>
                        <div class="col-sm-6">
                            <label class="small display-block">&nbsp;</label>
                            <mat-select placeholder="YYYY" formControlName="expiryYear">
                                <mat-option value="{{ expiryyear }}" *ngFor="let expiryyear of expiryYear">{{ expiryyear }}</mat-option>
                            </mat-select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <label class="small">CVC</label>
                            <mat-input-container class="pb-block">
                                <input matInput formControlName="cvc" type="text" placeholder="221">
                            </mat-input-container>
                        </div>
                        <div class="col-sm-6">
                            <span mdTooltip="The Card Verification Code or CVC, is an extra code printed on your debit or credit card" mdTooltipPosition="above"
                                class="small display-inline-block margin-top-35 cursor-pointer">What is cvc?</span>
                        </div>
                    </div>
                    <button mat-raised-button color="primary" type="submit" class="text-center" [disabled]="!makePaymentForm.valid">{{collection.price}} usd - Confirm Payment</button>
                    <div class="text-center margin-top-10" *ngIf="savingData"><img src="{{loader}}" alt="loading" style="width:16px;" />  Processing Payment</div>
                    <div class="text-center text-grey small margin-top-10">
                        <i class="fa fa-lock"></i> Your Credit card information is encrypted
                    </div>
                </form>
            </div>
        </div>
    </div>-->
</div>