<div class="row">
  <div class="col-md-12">
    <div *ngIf="!loaded" class="center">
      <i class="fa fa-spinner fa-spin" style="font-size:24px"></i>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-md-12" *ngIf="loaded">
    <div class="row">
      <div>
        <div style="margin-top:20px;" class="col-md-12">
          <div class="row">
            <div class="col-md-12">
              <button md-button (click)="updateProfile()" class="pull-right" style="margin-bottom: 20px;">
                Update Profile
              </button>
            </div>
          </div>
          <div class="row" style="margin-right: 20px; line-height: 120%">
            <form #profileEditForm="ngForm">
              <md-input-container class="pb-block" style="margin-bottom: 20px">
                <input mdInput #first_name name="first_name" type="text" [(ngModel)]="profile.first_name" placeholder="First Name" required>
                <md-error>This field is required</md-error>
              </md-input-container>
              <md-input-container class="pb-block" style="margin-bottom: 20px">
                <input mdInput #last_name name="last_name" type="text" [(ngModel)]="profile.last_name" placeholder="Last Name" required>
                <md-error>This field is required</md-error>
                <md-hint align="start">Your public profile only shows your first name. When you request a booking, your host will see your first and last name.</md-hint>
              </md-input-container>
              <md-input-container class="pb-block" style="margin-bottom: 20px">
                <input mdInput #headline name="headline" type="text" [(ngModel)]="profile.headline" placeholder="Profile Credential" required>
                <md-error>This field is required</md-error>
                <md-hint align="start">Ex. mechanical engineer, electric car enthusiast</md-hint>
                <md-hint align="end">{{headline.value.length}} / 200</md-hint>
              </md-input-container>
              <br>
              <md-select placeholder="Gender" style="margin-bottom: 20px" name="gender" [(ngModel)]="profile.gender">
                <md-option [value]="'Male'">Male</md-option>
                <md-option [value]="'Female'">Female</md-option>
              </md-select>
              <br><br>
              <md-select placeholder="Birth Month" style="margin-bottom: 20px" name="dobMonth" [(ngModel)]="profile.dobMonth">
                <md-option *ngFor="let month of months" [value]="month" >{{month}}</md-option>
              </md-select>
              <md-select placeholder="Day" style="margin-bottom: 20px" name="dobDay" [(ngModel)]="profile.dobDay">
                <md-option *ngFor="let day of days" [value]="day">{{day}}</md-option>
              </md-select>
              <md-select placeholder="Year" style="margin-bottom: 20px" name="dobYear" [(ngModel)]="profile.dobYear">
                <md-option *ngFor="let year of years" [value]="year">{{year}}</md-option>
              </md-select>
              <br><br>
              <md-input-container class="pb-block" style="margin-bottom: 20px">
                <input mdInput name="email" type="email" [(ngModel)]="profile.peer[0].email" placeholder="Email Address" required>
                <md-error>This field is required</md-error>
                <md-hint align="start">We wonʼt share your private email address with other peerbuds users. Learn more.</md-hint>
              </md-input-container>
              <md-input-container class="pb-block" style="margin-bottom: 20px">
                <input mdInput name="phones" type="tel" [(ngModel)]="profile.peer[0].phone" placeholder="Phone Number" required>
                <md-error>This field is required</md-error>
                <md-hint align="start">This is only shared once you have a confirmed booking with another peerbuds user. This is how we can all get in touch.</md-hint>
              </md-input-container>
              <br>
              <md-select placeholder="Preferred Language" style="margin-bottom: 20px" name="preferred_language" [(ngModel)]="profile.preferred_language">
                <md-option *ngIf="!languages">languages not available</md-option>
                <md-option *ngFor="let language of languages" [value]="language">{{language.name}}</md-option>
                <md-hint align="start">We'll send you messages in this language.</md-hint>
              </md-select>
              <br><br><br>
              <md-select placeholder="Preferred Currency" style="margin-bottom: 20px" name="preferred_currency" [(ngModel)]="profile.preferred_currency">
                <md-option *ngIf="!currencies">currencies not available</md-option>
                <md-option *ngFor="let currency of currencies" [value]="currency">{{currency.code}}</md-option>
                <md-hint align="start">Weʼll show you prices in this currency.</md-hint>
              </md-select>
              <br><br>
              <md-input-container class="pb-block" style="margin-bottom: 20px">
                <input mdInput name="location_string" type="text" [(ngModel)]="profile.location_string" placeholder="Where do you live" required>
                <md-error>This field is required</md-error>
              </md-input-container>
              <md-input-container class="pb-block" style="margin-bottom: 20px">
                <textarea mdInput #description name="description" rows="4" [(ngModel)]="profile.description" placeholder="Describe yourself" required></textarea>
                <md-error>This field is required</md-error>
                <md-hint align="start">Peerbuds is built on relationships. Help other people get to know you.
                  Tell them about the things you like: What are 5 things you canʼt live without? Share your favorite travel destinations, books, movies, shows, music, food.
                  Tell them what itʼs like to have you as a learner or teacher: Whatʼs your style of learning? Of peerbuds teaching? Tell them about you: Do you have a life motto?</md-hint>
                <md-hint align="end">{{description.value.length}} / 1000</md-hint>
              </md-input-container>

              <div style="margin-top: 90px; margin-bottom: 20px; color: #333333;">
                Additional Details
              </div>

              <div *ngFor="let work of profile.work; index as i; trackBy: trackByFn">
                <md-input-container >
                  <input mdInput name="position" type="text"  placeholder="Position" [(ngModel)]="profile.work[i].position">
                  <md-error>This field is required</md-error>
                </md-input-container>
                <md-input-container >
                  <input mdInput name="company" type="text"  placeholder="Company" [(ngModel)]="profile.work[i].company">
                  <md-error>This field is required</md-error>
                </md-input-container>
                <md-input-container >
                  <input mdInput name="startDate" type="date"  placeholder="Start Date" [ngModel]="profile.work[i].startDate | date:'y-MM-dd'" (ngModelChange)="profile.work[i].startDate=$event">
                  <md-error>This field is required</md-error>
                </md-input-container>
                <md-input-container >
                  <input mdInput name="endDate" type="date"  placeholder="End Date" [ngModel]="profile.work[i].endDate | date:'y-MM-dd'" (ngModelChange)="profile.work[i].endDate=$event">
                  <md-error>This field is required</md-error>
                </md-input-container>
                <md-icon (click)="deleteWorkDetailsRow(i)" style="cursor: pointer;" class="lighterText">
                  close
                </md-icon>
              </div>
              <div class="lighterText" style="margin-bottom: 30px; margin-top: -5px; cursor: pointer" (click)="addWorkDetailsRow()">
                + Add another work detail
              </div>

              <div *ngFor="let edu of profile.education; let index = index">
                <md-input-container>
                  <input mdInput name="edu_degree" type="text"  placeholder="Degree" [(ngModel)]="profile.education[index].degree" >
                  <md-error>This field is required</md-error>
                </md-input-container>
                <md-input-container>
                  <input mdInput name="edu_school" type="text"  placeholder="School / College" [(ngModel)]="profile.education[index].school">
                  <md-error>This field is required</md-error>
                </md-input-container>
                <md-input-container >
                  <input mdInput name="edu_start" type="text"  placeholder="Start Year" [(ngModel)]="profile.education[index].startYear">
                  <md-error>This field is required</md-error>
                </md-input-container>
                <md-input-container >
                  <input mdInput name="edu_end" type="text"  placeholder="End Year" [(ngModel)]="profile.education[index].endYear">
                  <md-error>This field is required</md-error>
                </md-input-container>
                <md-icon (click)="deleteEducationDetailsRow(index)" style="cursor: pointer;" class="lighterText">
                  close
                </md-icon>
              </div>
              <div class="lighterText" style="margin-bottom: 30px; margin-top: -5px; cursor: pointer" (click)="addEducationDetailsRow()">
                + Add another education detail
              </div>

              <md-input-container style="margin-bottom: 20px">
                <input mdInput name="timezone" type="text" [(ngModel)]="profile.timezone" placeholder="Timezone">
                <md-error>This field is required</md-error>
                <md-hint align="start">Your home time zone.</md-hint>
              </md-input-container>
              <div *ngFor="let otherLang of profile.other_languages; let index = index;">
                <md-select placeholder="Languages" style="margin-bottom: 20px" name="other_languages" [(ngModel)]="profile.other_languages[index]">
                  <md-option *ngFor="let language of languages" [value]="language">{{language}}</md-option>
                  <md-hint align="start">Add any languages that others can use to speak with you on peerbuds.</md-hint>
                </md-select>
              </div>
              <md-input-container style="margin-bottom: 20px" class="pb-block">
                <input mdInput name="vat_number" type="text" [(ngModel)]="profile.vat_number" placeholder="VAT Number">
                <md-error>This field is required</md-error>
                <md-hint align="start">For European Union users or users in other countries for which VAT applies, VAT will be assessed on our Service Fees. If you live in a country where we need to charge VAT, you will not be charged VAT if you enter a valid VAT ID Number. Visit VAT FAQs »</md-hint>
              </md-input-container>
              <div *ngFor="let emerg of profile.emergency_contact; let index = index;">
                <md-input-container style="margin-bottom: 20px" class="pb-block">
                  <input mdInput name="emergency_contact" type="text"  placeholder="Emergency Contact" [(ngModel)]="profile.emergency_contact[index]">
                  <md-error>This field is required</md-error>
                  <md-hint align="start">Give our Customer Experience team a trusted contact we can alert in an urgent situation.</md-hint>
                </md-input-container>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
